{% extends "navigation.html" %}

{% block content %}
<h1>Import Tags</h1>
<form action={{url_for('import_tags')}} method="post">
    <label>name</label>
    <br />
    <input type="text" name="tag_name" />
    <br />
    <label>pattern</label>
    <br />
    <input type="text" name="tag_pattern" />
    <br />
    <input type="radio" name="tag_income_vs_expense" value="income" checked>income</input>
    <br />
    <input type="radio" name="tag_income_vs_expense" value="expense">expense</input>
    <br />
    <label>account</label>
    <br />
    <select name="tag_account" >
    {% for account in accounts %}
        <option value="{{ account }}">{{ account }}</option>
    {% endfor %}
    </select>
    <br />
    <input type="submit" value="submit"/>
</form>
<h2>DEBUG</h2>
{% for thing in debug %}
    <label>{{thing}}</label>
    <br />
{% endfor %}
<h2>Tags</h2>
<button onclick="hideShowTags()">Show/Hide</button>
<form action={{url_for('delete_tags')}} method="post">
    <input type="submit" value="Delete Selected Tags"/>
    <table id="tags_table" style="display: block;">
        <tr>
            <th><input type="checkbox" /></th>
            <th>name</th>
            <th>pattern</th>
            <th>income vs expense</th>
            <th>account</th>
        </tr>
    {% for tag in tags %}
        <tr>
            <td><input type="checkbox" name="tag_to_delete" value="{{tag.id}}" /></td>
            <td>{{tag.name}}</td>
            <td>{{tag.pattern}}</td>
            <td>{{tag.income_vs_expense}}</td>
            <td>{{tag.account}}</td>
        </tr>
    {% endfor %}
    </table>
</form>
<h2>Untagged Transactions</h2>
<table>
    <tr>
        <th>account</th>
        <th>amount</th>
        <th>description</th>
        <th>date</th>
    </tr>
    {% for untagged_transaction in untagged_transactions %}
    <tr>
        <td>{{untagged_transaction.account}}</td>
        <th>{{untagged_transaction.amount}}</th>
        <th>[{{untagged_transaction.description}}]</th>
        <th>{{untagged_transaction.date}}</th>
    </tr>
    {% endfor %}
<script>
function hideShowTags() {
    tags_table = document.getElementById( 'tags_table' )
    if( tags_table.style.display == 'none' ) {
        tags_table.style.display = 'block'
    }
    else if( tags_table.style.display == 'block' ) {
        tags_table.style.display = 'none'
    }
    else {
        alert( 'table display value should not be [' + tags_table.style.display + ']' )
    }
}
</script>
{% endblock %}
